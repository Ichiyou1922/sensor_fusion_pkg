generic_kf_node:
  ros__parameters:
    # 4次元状態: [x, vx, y, vy]^T
    dim_x: 4
    # 観測は2次元: [x_meas, y_meas]^T
    dim_z: 2

    # センサトピック（既存の noisy_sensor を使うならこのまま）
    sensor_topics:
      - "/sensor_1/data"   # x 方向の位置計測
      - "/sensor_2/data"   # y 方向の位置計測

    # 離散時間の定常速度モデル（Δt = 1.0 と仮定）
    # x_k = F x_{k-1} + w_k
    F:
      - [1.0, 1.0, 0.0, 0.0]
      - [0.0, 1.0, 0.0, 0.0]
      - [0.0, 0.0, 1.0, 1.0]
      - [0.0, 0.0, 0.0, 1.0]

    # 観測 H: センサ1は x，センサ2は y のみ観測
    H:
      - [1.0, 0.0, 0.0, 0.0]  # z1 = x + noise
      - [0.0, 0.0, 1.0, 0.0]  # z2 = y + noise

    # プロセス雑音共分散（位置と速度に小さめの雑音）
    Q:
      - [0.01, 0.0,  0.0,  0.0]
      - [0.0,  0.1,  0.0,  0.0]
      - [0.0,  0.0,  0.01, 0.0]
      - [0.0,  0.0,  0.0,  0.1]

    # 観測雑音共分散（センサ1，2の分散）
    R:
      - [1.0, 0.0]
      - [0.0, 1.0]

    # 初期状態ベクトル [x, vx, y, vy]^T
    x0: [0.0, 0.0, 0.0, 0.0]

    # 初期共分散（位置はかなり不確か，速度もそこそこ不確か）
    P0:
      - [100.0, 0.0,   0.0,   0.0]
      - [0.0,   10.0,  0.0,   0.0]
      - [0.0,   0.0,   100.0, 0.0]
      - [0.0,   0.0,   0.0,   10.0]
